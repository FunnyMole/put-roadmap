@echo off
chcp 65001 >nul
title üöÄ –ü—É—Ç—å - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
color 0A

:start
cls
echo.
echo   ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo   ‚ïë                                                       ‚ïë
echo   ‚ïë      ‚ö° –ü–£–¢–¨ - –£–°–¢–ê–ù–û–í–ö–ê –ò –ó–ê–ü–£–°–ö –ü–†–û–ï–ö–¢–ê ‚ö°          ‚ïë
echo   ‚ïë                                                       ‚ïë
echo   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js
node --version >nul 2>nul
if %errorlevel% neq 0 (
    echo ‚ùå Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo.
    echo –°–∫–∞—á–∞–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ Node.js —Å —Å–∞–π—Ç–∞:
    echo https://nodejs.org/
    echo.
    echo –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å–Ω–æ–≤–∞.
    echo.
    pause
    exit
)

:: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–µ—Ä—Å–∏–∏
echo ‚úÖ Node.js: 
node --version
echo ‚úÖ npm: 
call npm --version
echo.

:: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—ç–∫–µ–Ω–¥–∞
echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±—ç–∫–µ–Ω–¥–∞...
cd backend
if exist "node_modules" (
    echo    ‚úÖ –ë—ç–∫–µ–Ω–¥: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
) else (
    echo    ‚è≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞... (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)
    call npm install
    if %errorlevel% neq 0 (
        echo ‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—ç–∫–µ–Ω–¥–∞
        pause
        exit
    )
    echo    ‚úÖ –ë—ç–∫–µ–Ω–¥: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
)
cd ..

echo.

:: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
echo üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞...
cd frontend
if exist "node_modules" (
    echo    ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
) else (
    echo    ‚è≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞... (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)
    call npm install
    if %errorlevel% neq 0 (
        echo ‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
        pause
        exit
    )
    echo    ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
)
cd ..

echo.
echo ===============================================
echo üöÄ –ó–ê–ü–£–°–ö –ü–†–û–ï–ö–¢–ê...
echo ===============================================
echo.

:: –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞
start "–ü—É—Ç—å - –ë—ç–∫–µ–Ω–¥" cmd /k "cd backend && title –ü—É—Ç—å - –ë—ç–∫–µ–Ω–¥ && echo. && echo ‚úÖ –ë—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω && echo üìÅ http://localhost:3001 && echo. && npm run dev"

timeout /t 2 /nobreak >nul

:: –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
start "–ü—É—Ç—å - –§—Ä–æ–Ω—Ç–µ–Ω–¥" cmd /k "cd frontend && title –ü—É—Ç—å - –§—Ä–æ–Ω—Ç–µ–Ω–¥ && echo. && echo ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω && echo üåê http://localhost:5173 && echo. && npm run dev"

echo.
echo ‚úÖ –ü–†–û–ï–ö–¢ –ó–ê–ü–£–©–ï–ù!
echo.
echo üìÅ –ë—ç–∫–µ–Ω–¥: http://localhost:3001
echo üåê –§—Ä–æ–Ω—Ç–µ–Ω–¥: http://localhost:5173
echo.
echo ‚è≥ –ü–æ–¥–æ–∂–¥–∏ –Ω–µ–º–Ω–æ–≥–æ, —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è...
echo.
echo ‚ùå –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–∫—Ä–æ–π –≤—Å–µ –æ–∫–Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
echo.
pause